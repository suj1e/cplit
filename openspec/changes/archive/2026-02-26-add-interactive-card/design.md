## Context

飞书支持交互式卡片，可以包含按钮，用户点击后飞书会向配置的回调 URL 发送请求。

## Goals / Non-Goals

**Goals:**
- 审批卡片显示"批准"和"拒绝"按钮
- 点击按钮后立即响应，更新卡片显示结果
- 保持兼容文本回复方式

**Non-Goals:**
- 复杂的审批流程（多人审批、条件审批等）

## Decisions

### 卡片设计

```
┌─────────────────────────────────────┐
│ 🔐 Claude 命令审批请求               │
├─────────────────────────────────────┤
│  命令: `rm -rf build`               │
│  目录: `/gateway-center`            │
│                                     │
│  ┌─────────┐    ┌─────────┐        │
│  │ ✓ 批准  │    │ ✗ 拒绝  │        │
│  └─────────┘    └─────────┘        │
└─────────────────────────────────────┘

点击后：

┌─────────────────────────────────────┐
│ ✅ 已批准                           │
├─────────────────────────────────────┤
│  命令: `rm -rf build`               │
│  处理时间: 2026-02-26 20:00:00      │
└─────────────────────────────────────┘
```

### 回调处理

飞书卡片回调 POST 到 `/feishu/card-callback`，包含：
- `open_id`: 点击用户
- `action`: 按钮值（approve/deny）
- 卡片 token（用于识别请求）

### 兼容性

- 文本回复继续支持
- 卡片按钮和文本回复都能触发审批

## Risks / Trade-offs

| 风险 | 缓解措施 |
|------|---------|
| 卡片 token 丢失 | 使用 requestId 作为唯一标识，存入 pendingMap |
